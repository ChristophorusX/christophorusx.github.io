<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Open Sans:300,300italic,400,400italic,700,700italic|Julius Sans One:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Mathematics,Economics,Finance,">










<meta name="description" content="Time plays an important role for investment decisions. One aspect of it is the opportunity to make the same decision later; therefore the option of postponement should be included in today&apos;s menu of c">
<meta name="keywords" content="Mathematics,Economics,Finance">
<meta property="og:type" content="article">
<meta property="og:title" content="Dynamic Optimization Under Uncertainty">
<meta property="og:url" content="http://christophorusx.github.io/Dynamic-Optimization-Under-Uncertainty/index.html">
<meta property="og:site_name" content="Imāginātiōnēs Christophorōrum">
<meta property="og:description" content="Time plays an important role for investment decisions. One aspect of it is the opportunity to make the same decision later; therefore the option of postponement should be included in today&apos;s menu of c">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-03-18T00:42:09.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dynamic Optimization Under Uncertainty">
<meta name="twitter:description" content="Time plays an important role for investment decisions. One aspect of it is the opportunity to make the same decision later; therefore the option of postponement should be included in today&apos;s menu of c">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: 'Author'
    },
    algolia: {
      applicationID: '3KKNGPDMU2',
      apiKey: 'f66a93c7fe61cc186afe80af34bef678',
      indexName: 'blog_Chris',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://christophorusx.github.io/Dynamic-Optimization-Under-Uncertainty/">





  <title>Dynamic Optimization Under Uncertainty | Imāginātiōnēs Christophorōrum</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-93186747-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  


  <div id="particles-js"></div>
  <script src="//cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Imāginātiōnēs Christophorōrum</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">in which we fantasy</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://christophorusx.github.io/Dynamic-Optimization-Under-Uncertainty/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChristophorusX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/12285265?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Imāginātiōnēs Christophorōrum">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Dynamic Optimization Under Uncertainty</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-12T14:38:12-04:00">
                2017-03-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Academic/" itemprop="url" rel="index">
                    <span itemprop="name">Academic</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Time plays an important role for investment decisions. One aspect of it is the opportunity to make the same decision later; therefore the option of postponement should be included in today's menu of choices. <span class="math inline">\(\newcommand\bbE{\mathbb{E}}\)</span></p>
<h4 id="two-period-example">Two Period Example</h4>
<p>Let <span class="math inline">\(I\)</span> denote the sunk cost of investment that then produce a product per period forever, and let <span class="math inline">\(r\)</span> be the interest rate. Suppose the price of the product in period <span class="math inline">\(0\)</span> is <span class="math inline">\(P_0\)</span>. From period <span class="math inline">\(1\)</span> onward, it will be <span class="math inline">\((1+u)P_0\)</span> with probability <span class="math inline">\(q\)</span> and <span class="math inline">\((1-d)P_0\)</span> with probability <span class="math inline">\(1-q\)</span>.</p>
<p>If the investment opportunity is available only in period <span class="math inline">\(0\)</span>, the expected present value of the revenue is denoted by <span class="math inline">\(V_0\)</span>. <span class="math display">\[
V_0=P_0+[q(1-u)P_0+(1-q)(1-d)P_0]\left[{1\over 1+r}+{1\over (1+r)^2}+\cdots\right]
\]</span> and the net payoff of the project <span class="math inline">\(\Omega_0=\max[V_0-I,0]\)</span>.</p>
<p>Now consider the actual situation, where the investment opportunity remains available in future periods. The outcome of future optimal decisions, which is called expected continuation value, can be written as <span class="math display">\[
\mathbb{E}_0[F_1]=q\max[(1+u)P_0{1+r\over r}-I,0]+(1-q)\max[(1-d)P_0{1+r\over r}-I,0]
\]</span> Therefore, the net present value of the whole investment opportunity optimally deployed, which we denote by <span class="math inline">\(F_0\)</span>, is <span class="math display">\[
F_0=\max\lbrace V_0-I,{1\over 1+r}\mathbb{E}_0[F_1]\rbrace
\]</span></p>
<h4 id="many-period-problem-on-markov-chain">Many Period Problem on Markov chain</h4>
<p>For those that have many periods, let <span class="math inline">\(u_t\)</span> be the possible control variables at time <span class="math inline">\(t\)</span>, <span class="math inline">\(\pi_t(x_t,u_t)\)</span> be the profit flow at time <span class="math inline">\(t\)</span> after taking control <span class="math inline">\(u_t\)</span> at position <span class="math inline">\(x_t\)</span>, <span class="math inline">\(\rho\)</span> be the discount rate, and <span class="math inline">\(F_t(x_t)\)</span> be the expected net present value when the firm makes all decisions optimally from this point onwards. Since for any time <span class="math inline">\(t\)</span>, <span class="math inline">\(F_{t+1}(x_{t+1})\)</span> is random as <span class="math inline">\(x_{t+1}\)</span> is randomly assigned in a Markov chain. Thus, <span class="math display">\[
F_t(x_t)=\max_{u_t}\left\lbrace \pi_t(x_t,u_t)+{1\over 1+\rho}\mathbb{E}_t\left[F_{t+1}(x_{t+1})\right]\right\rbrace
\]</span></p>
<p>The idea behind this decomposition is Bellman's Principle of Optimality. To reiterate, the first term on the right-hand side is the immediate profit, the second term constitutes the continuation value, and the optimum action this period is the one that maximize the sum of these two components. If the many-period problem has a fixed finite time horizon <span class="math inline">\(T\)</span>, we can start at the end and work backward. If there's no fixed finite time horizon for the decision problem, there is no known final value function from which we can work backward.</p>
<p>The crucial simplification that an infinite horizon brings to the above equation is independence from time <span class="math inline">\(t\)</span> as such, i.e. <span class="math inline">\(t\)</span> by itself has no effect. This works provided the flow profit function <span class="math inline">\(\pi\)</span>, the transition probability distribution function <span class="math inline">\(\Phi\)</span>, and the discount rate <span class="math inline">\(\rho\)</span> are themselves all independent of the actual label of <span class="math inline">\(t\)</span>. In this setting, the problem one period hence looks exactly like the problem , except for a new starting state. Therefore the value function is common to all periods, although it will be evaluated at different points <span class="math inline">\(x_t\)</span>. Thus, the Bellman equation for any <span class="math inline">\(t\)</span> becomes <span class="math display">\[
F(x_t)=\max_{u_t}\left\lbrace\pi(x_t,u_t)+{1\over 1+\rho}\bbE_t[F(x_{t+1})]\right\rbrace
\]</span></p>
<p>The recursive Bellman equation can be thought of as a whole list of equations, one for each possible value of <span class="math inline">\(x\)</span>, with a whole list of unknowns, namely all the values <span class="math inline">\(F(x)\)</span>. If <span class="math inline">\(x\)</span> took on only a finite number of discrete values <span class="math inline">\(x_i\)</span>, this would be a system of equations with exactly as many equations as the number of unknowns <span class="math inline">\(F(x_i)\)</span>. However, the equation is not linear as the optimal choice of <span class="math inline">\(u\)</span> depends on all the values <span class="math inline">\(F(x_{t+1})\)</span> that appear in the expectation. In general, we do not know whether nonlinear functional equations have solutions, let alone unique ones. Fortunately, the recursive Bellman equation has a special structure that allows existence and uniqueness of a solution function <span class="math inline">\(F(x)\)</span>.</p>
<p>It is essentially a practical solution method. We start with any guess for the true value function, say <span class="math inline">\(F^{(1)}(x)\)</span>. Use it on the right-hand side of the Bellman equation and find the corresponding optimal choice rule <span class="math inline">\(u^{(1)}\)</span>, which can be expressed as a function of <span class="math inline">\(x\)</span> alone. Then substituting it back, the RHS becomes a new function of <span class="math inline">\(x\)</span>; call it <span class="math inline">\(F^{(2)}\)</span>. Then the successive guesses will converge to the true function regardless of the initial guess. The key lies in the factor <span class="math inline">\(1/(1+\rho)\)</span>, which is strictly less than <span class="math inline">\(1\)</span> and scales down any errors in the guess.</p>
<h4 id="optimal-stopping">Optimal Stopping</h4>
<p>Here the choice in any period is binary. One alternative corresponds to stopping the process to take the termination payoff, and the other entails continuation for one period, when another similar binary choice will be available. In the investment model, stopping corresponds to making the investment. and continuation corresponds to waiting.</p>
<p>Let <span class="math inline">\(\pi(x)\)</span> denote the flow profit, and <span class="math inline">\(\Omega(x)\)</span> the termination payoff. Then the Bellman equation becomes <span class="math display">\[
F(x)=\max\left\lbrace\Omega(x), \pi(x_t,u_t)+{1\over 1+\rho}\bbE[F(x&#39;)\mid x]\right\rbrace
\]</span> For some range of values of <span class="math inline">\(x\)</span>, the maximum on the right-hand side of this will be achieved by termination, and for other values of <span class="math inline">\(x\)</span> it will be achieved through continuation. In general this division could be arbitrary; intervals where termination is optimal could alternate with ones where continuation is optimal. However, most economic applications will have more structure. There will be a single cutoff <span class="math inline">\(x&#39;\)</span>, with termination optimal on one side and continuation on the other.</p>
<h4 id="continuous-time">Continuous Time</h4>
<p>Suppose each time period is of length <span class="math inline">\(\Delta t\)</span>. We write <span class="math inline">\(\pi(x,u,t)\)</span> for the rate of the profit flow, so that the actual profit over the time period of length <span class="math inline">\(\Delta t\)</span> is <span class="math inline">\(\pi(x,u,t)\Delta t\)</span>. SImilarly, let <span class="math inline">\(\rho\)</span> be the discount rate per unit time, so the total discounting over an interval of length <span class="math inline">\(\Delta t\)</span> is by the factor <span class="math inline">\(1/(1+\rho\Delta t)\)</span>. The Bellman equation now becomes <span class="math display">\[
F(x)=\max\left\lbrace\pi(x,u,t)\Delta t+{1\over 1+\rho\Delta t}\bbE[F(x&#39;,t+\Delta t)\mid x, u]\right\rbrace
\]</span> Rearrange the above equation and get <span class="math display">\[
\rho\Delta t F(x,t)=\max_u\left\lbrace\pi(x,u,t)\Delta t(1+\rho\Delta t)+\bbE[\Delta F]\right\rbrace
\]</span> Divide by <span class="math inline">\(\Delta t\)</span> and let it go to zero. We get <span class="math display">\[
\rho\Delta t F(x,t)=\max_u\left\lbrace\pi(x,u,t)+{1\over dt}\bbE[dF]\right\rbrace
\]</span> On the LHS we have the normal return per unit time that a decision maker using <span class="math inline">\(\rho\)</span> as the discount rate, would require for holding this asset. On the RHS, the first term is the immediate payout or dividend from the asset, while the second term is its expected rate of capital gain (loss if negative). Thus the RHS is the expected total return per unit time from holding the asset. The equality becomes a no-arbitrage or equilibrium condition, expressing the investor's willingness to hold the asset. The maximization with respect to <span class="math inline">\(u\)</span> means that the current operation of the asset is being managed optimally, bearing in mind not only the immediate payout but also the consequences for future values.</p>
<p>The limit on the RHS depends on the expectation corresponding to the random <span class="math inline">\(x&#39;\)</span> a time <span class="math inline">\(\Delta t\)</span> later. There are two classes of stochastic processes in continuous time that allow such limits in a form conducive to further analysis and solution of the function <span class="math inline">\(F(x,t)\)</span> in the continuation region, which are the Ito and Poisson processes.</p>
<p>In discrete time, we stipulated that the action <span class="math inline">\(u\)</span>, taken in the current period <span class="math inline">\(t\)</span> could depend on the knowledge of the current state <span class="math inline">\(x_t\)</span>, but not on the random future state <span class="math inline">\(x_{t+1}\)</span>· In continuous time the two coalesce. We have to be careful not to allow choices to depend on information about the future, even about &quot;the next instant.&quot; Otherwise we would he acting with the benefit of hindsight, and could make infinite profits. Technically this can be avoided by requiring the uncertainty to be &quot;continuous from the right&quot; in time while the strategies are &quot;continuous from the left.&quot; Then any jumps in the stochastic processes occur at an instant, while the actions cannot change until just after the instant.</p>
<h4 id="ito-processes">Ito Processes</h4>
<p><span class="math display">\[
dx=a(x,u,t)dt+b(x,u,t)dW_t
\]</span> where <span class="math inline">\(dW_t\)</span> is the increment of a standard Wiener process.</p>
<p>Applying it to value function <span class="math inline">\(F\)</span>, we have</p>
<p><span class="math display">\[\begin{align}\label{eq:ito}
\rho F(x,t)=\max_u\left\lbrace\pi(x,u,t)+F_t(x,t)+a(x,u,t)F_x(x,t)+{1\over 2}b^2(x,u,t)F_{xx}(x,t)\right\rbrace
\end{align}\]</span></p>
<p>Substituting this expression for the optimal <span class="math inline">\(u\)</span> back into the RHS equation <span class="math inline">\(\eqref{eq:ito}\)</span>. we get a partial differential equation of the second order. with <span class="math inline">\(F\)</span> as the dependent variable and <span class="math inline">\(x\)</span> and <span class="math inline">\(t\)</span> as the independent variables. In general this equation is very complicated.</p>
<p>If the time horizon is infinite and the functions <span class="math inline">\(\pi\)</span>, <span class="math inline">\(a\)</span>, and <span class="math inline">\(b\)</span> do not depend explicitly on time, then neither does the value function depend on time, and equation <span class="math inline">\(\eqref{eq:ito}\)</span> becomes an ODE with <span class="math inline">\(x\)</span> as its only independent variable:</p>
<p><span class="math display">\[\begin{align}
\rho F(x)=\max_u\left\lbrace\pi(x,u)+a(x,u)F&#39;(x)+{1\over 2}b^2(x,u)F&#39;&#39;(x)\right\rbrace
\end{align}\]</span></p>
<h4 id="optimal-stopping-and-smooth-pasting">Optimal Stopping and Smooth Pasting</h4>
<p>Here we consider a binary decision problem. At every instant, the firm can either continue its current situation to get a profit flow, or stop and get a termination payoff. Both the profit flow <span class="math inline">\(\pi(x, t)\)</span> and the termination payoff <span class="math inline">\(\Omega(x, t)\)</span> can depend on a state variable <span class="math inline">\(x\)</span> and on time <span class="math inline">\(t\)</span>, where <span class="math inline">\(x\)</span> follows an Ito process <span class="math display">\[
dx=a(x,t)dt+b(x,t)dW_t
\]</span> The most obvious example is of a firm deciding whether to cease operation and sell its equipment for its scrap value. Investment decisions can also be put in this form: continuation means waiting, and the flow payoff is zero; stopping means investing, and the termination payoff is just the expected present value of future profits from the project minus the cost of investment.</p>
<p>Intuition suggests that for each <span class="math inline">\(t\)</span> there will be a critical value <span class="math inline">\(x^\ast(t)\)</span>, with continuation optimal if <span class="math inline">\(x_t\)</span> lies on one side of <span class="math inline">\(x^\ast(t)\)</span>, and stopping optimal on the other side. We can regard the critical values <span class="math inline">\(x^\ast(t)\)</span> for various <span class="math inline">\(t\)</span> as forming a curve that divides the <span class="math inline">\((x,t)\)</span> space into two regions, with continuation optimal above the curve and termination optimal below it.</p>
<p>Since we have the Bellman equation as <span class="math display">\[
F(x,t)=\max\left\lbrace\Omega(x,t),\pi(x,t)+{1\over 1+\rho dt}\bbE[F(x+dx,t+dt)\mid x]\right\rbrace
\]</span> In the continuation region, the second term on the RHS is the larger of the two. Expanding it by Ito Lemma, we get a PDE satisfied by the value function. <span class="math display">\[
{1\over 2}b^2(x,t)F_{xx}(x,t)+a(x,t)F_x(x,t)+F_t(x,t)-\rho F(x,t)+\pi(x,t)=0
\]</span> This holds for <span class="math inline">\(x&gt;x^\ast(t)\)</span>, and we need to look for boundary conditions that hold along <span class="math inline">\(x=x^\ast(t)\)</span>. From the Bellman equation, we know that in the stopping region we have <span class="math inline">\(F(x,t)=\Omega(x,t)\)</span>, so by continuity we can impose the condition <span class="math display">\[
F(x^\ast(t),t)=\Omega(x^\ast(t),t)
\]</span> for all <span class="math inline">\(t\)</span>. This is often called &quot;value-matching condition&quot; because it matches the values of the unknown function <span class="math inline">\(F(x,t)\)</span> to those of the known termination payoff function <span class="math inline">\(\Omega(x,t)\)</span>.</p>
<p>However, the boundary itself, i.e. the region in <span class="math inline">\((x,t)\)</span> space over which the PDE is valid, is an unknown. The boundary of the region, namely the curve <span class="math inline">\(x^\ast(t)\)</span>, is called a &quot;free boundary,&quot; and the whole problem of solving the equation and determining its region is called a free-boundary problem.</p>
<p>We need a second condition if we are to find <span class="math inline">\(x^\ast(t)\)</span> jointly with the function <span class="math inline">\(F(x,t)\)</span>. The extra condition comes from economic considerations. We must have <span class="math display">\[
F_x(x^\ast(t),t)=\Omega_x(x^\ast(t),t)
\]</span> for all <span class="math inline">\(t\)</span>. This is called &quot;smooth-pasting condition&quot; because it requires not just the values but also the derivatives or slopes of the two functions to match at the boundary.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Mathematics/" rel="tag"># Mathematics</a>
          
            <a href="/tags/Economics/" rel="tag"># Economics</a>
          
            <a href="/tags/Finance/" rel="tag"># Finance</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/Dynamic-Investment/" rel="next" title="Dynamic Investment">
                <i class="fa fa-chevron-left"></i> Dynamic Investment
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Investment-Timing/" rel="prev" title="Investment Timing">
                Investment Timing <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars2.githubusercontent.com/u/12285265?v=3&s=400" alt="ChristophorusX">
            
              <p class="site-author-name" itemprop="name">ChristophorusX</p>
              <p class="site-description motion-element" itemprop="description">何でもは知らないわよ、知ってることだけ</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ChristophorusX" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#two-period-example"><span class="nav-number">1.</span> <span class="nav-text">Two Period Example</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#many-period-problem-on-markov-chain"><span class="nav-number">2.</span> <span class="nav-text">Many Period Problem on Markov chain</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#optimal-stopping"><span class="nav-number">3.</span> <span class="nav-text">Optimal Stopping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#continuous-time"><span class="nav-number">4.</span> <span class="nav-text">Continuous Time</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ito-processes"><span class="nav-number">5.</span> <span class="nav-text">Ito Processes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#optimal-stopping-and-smooth-pasting"><span class="nav-number">6.</span> <span class="nav-text">Optimal Stopping and Smooth Pasting</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ChristophorusX</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>


  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/particles/particles.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  








  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: {
          equationNumbers: { autoNumber: "AMS" }
        },
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  


  <a href="https://github.com/ChristophorusX"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/c6625ac1f3ee0a12250227cf83ce904423abf351/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png"></a>

</body>
</html>
